{- Simple Text Mode FONT Changer -}

Const
 DOSModeFont_Data : Array[0..2047] of byte =(
  $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$3C,$42,$81,$E7,$A5,$99,$81,$99,$42,$3C,$00,$00,$00,$00,
  $00,$00,$3C,$7E,$FF,$99,$DB,$E7,$FF,$E7,$7E,$3C,$00,$00,$00,$00,
  $00,$00,$00,$00,$6C,$FE,$FE,$FE,$FE,$7C,$38,$10,$00,$00,$00,$00,
  $00,$00,$00,$00,$10,$38,$7C,$FE,$7C,$38,$10,$00,$00,$00,$00,$00,
  $00,$00,$00,$18,$3C,$3C,$E7,$E7,$E7,$18,$18,$3C,$00,$00,$00,$00,
  $00,$00,$00,$18,$3C,$7E,$FF,$FF,$7E,$18,$18,$3C,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$00,$18,$3C,$3C,$18,$00,$00,$00,$00,$00,$00,
  $FF,$FF,$FF,$FF,$FF,$FF,$E7,$C3,$C3,$E7,$FF,$FF,$FF,$FF,$FF,$FF,
  $00,$00,$00,$00,$00,$3C,$66,$42,$42,$66,$3C,$00,$00,$00,$00,$00,
  $FF,$FF,$FF,$FF,$FF,$C3,$99,$BD,$BD,$99,$C3,$FF,$FF,$FF,$FF,$FF,
  $00,$00,$0F,$07,$0D,$18,$7E,$C3,$C3,$C3,$C3,$7E,$00,$00,$00,$00,
  $00,$00,$7E,$C3,$C3,$C3,$7E,$18,$18,$7E,$18,$18,$00,$00,$00,$00,
  $00,$00,$08,$0C,$0E,$0B,$08,$08,$08,$78,$F8,$70,$00,$00,$00,$00,
  $00,$10,$18,$1C,$1E,$1E,$16,$12,$72,$F2,$62,$0E,$1E,$0C,$00,$00,
  $00,$00,$18,$18,$DB,$7E,$3C,$FF,$3C,$7E,$DB,$18,$18,$00,$00,$00,
  $00,$00,$60,$70,$78,$7C,$7E,$7E,$7C,$78,$70,$60,$00,$00,$00,$00,
  $00,$00,$06,$0E,$1E,$3E,$7E,$7E,$3E,$1E,$0E,$06,$00,$00,$00,$00,
  $00,$00,$10,$38,$7C,$FE,$38,$38,$38,$38,$FE,$7C,$38,$10,$00,$00,
  $00,$00,$66,$66,$66,$66,$66,$66,$66,$00,$66,$66,$00,$00,$00,$00,
  $00,$00,$7E,$F6,$F6,$F6,$F6,$F6,$7F,$36,$36,$36,$00,$00,$00,$00,
  $00,$1E,$30,$78,$DC,$CE,$E7,$73,$3B,$1E,$0C,$78,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$00,$00,$00,$7E,$7E,$7E,$7E,$00,$00,$00,$00,
  $00,$00,$10,$38,$7C,$FE,$38,$38,$38,$FE,$7C,$38,$10,$00,$FE,$00,
  $00,$00,$10,$38,$7C,$FE,$38,$38,$38,$38,$38,$38,$38,$38,$00,$00,
  $00,$00,$38,$38,$38,$38,$38,$38,$38,$38,$FE,$7C,$38,$10,$00,$00,
  $00,$00,$00,$00,$00,$08,$0C,$FE,$FF,$FE,$0C,$08,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$10,$30,$7F,$FF,$7F,$30,$10,$00,$00,$00,$00,
  $00,$00,$22,$66,$CC,$CC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$24,$66,$FF,$FF,$66,$24,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$18,$3C,$3C,$7E,$7E,$FF,$FF,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$FF,$FF,$7E,$7E,$3C,$3C,$18,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$18,$18,$18,$18,$18,$18,$18,$00,$18,$18,$00,$00,$00,$00,
  $00,$00,$33,$33,$66,$44,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$66,$66,$FF,$66,$66,$FF,$66,$66,$66,$66,$00,$00,$00,$00,
  $00,$18,$7E,$D8,$D8,$78,$1E,$1B,$1B,$1B,$1B,$FE,$18,$00,$00,$00,
  $00,$00,$70,$50,$70,$03,$0E,$38,$E0,$0E,$0A,$0E,$00,$00,$00,$00,
  $00,$00,$7C,$C0,$C0,$78,$C0,$C0,$CF,$C6,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$18,$18,$30,$20,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$0C,$18,$10,$30,$30,$30,$30,$30,$30,$10,$18,$0C,$00,$00,$00,
  $00,$30,$18,$08,$0C,$0C,$0C,$0C,$0C,$0C,$08,$18,$30,$00,$00,$00,
  $00,$00,$00,$00,$18,$18,$FF,$3C,$3C,$66,$00,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$18,$18,$7E,$18,$18,$00,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$18,$18,$30,$20,$00,$00,
  $00,$00,$00,$00,$00,$00,$00,$7E,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$18,$18,$00,$00,$00,$00,
  $00,$00,$00,$02,$06,$0C,$18,$30,$60,$C0,$80,$00,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$C6,$C6,$D6,$D6,$C6,$C6,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$18,$38,$18,$18,$18,$18,$18,$18,$18,$3C,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$06,$0C,$0C,$18,$30,$30,$60,$FE,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$06,$3C,$06,$06,$06,$06,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$0C,$1C,$3C,$6C,$CC,$CC,$CC,$7F,$0C,$0C,$00,$00,$00,$00,
  $00,$00,$FE,$C0,$C0,$FC,$06,$06,$06,$06,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$7C,$C0,$C0,$FC,$C6,$C6,$C6,$C6,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$FE,$0C,$0C,$18,$18,$30,$30,$30,$30,$30,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$C6,$7C,$C6,$C6,$C6,$C6,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$C6,$C6,$C6,$C6,$7E,$06,$06,$7C,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$18,$18,$00,$00,$18,$18,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$18,$18,$00,$00,$18,$18,$30,$20,$00,$00,$00,
  $00,$00,$06,$0C,$18,$30,$60,$60,$30,$18,$0C,$06,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$7E,$00,$00,$7E,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$60,$30,$18,$0C,$06,$06,$0C,$18,$30,$60,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$06,$06,$1C,$30,$30,$00,$30,$30,$00,$00,$00,$00,
  $00,$00,$7E,$C3,$C3,$CF,$DB,$DB,$DB,$DE,$C0,$7F,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$C6,$C6,$C6,$C6,$FF,$C6,$C6,$C6,$00,$00,$00,$00,
  $00,$00,$FC,$C6,$C6,$FC,$C6,$C6,$C6,$C6,$C6,$FC,$00,$00,$00,$00,
  $00,$00,$3E,$60,$60,$60,$60,$60,$60,$60,$60,$3E,$00,$00,$00,$00,
  $00,$00,$FC,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$FC,$00,$00,$00,$00,
  $00,$00,$3E,$60,$60,$60,$60,$60,$F8,$60,$60,$3E,$00,$00,$00,$00,
  $00,$00,$3E,$60,$60,$60,$60,$60,$F8,$60,$60,$60,$00,$00,$00,$00,
  $00,$00,$7C,$C0,$C0,$C0,$C0,$C0,$CE,$C6,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$C6,$C6,$C6,$C6,$C6,$C6,$FF,$C6,$C6,$C6,$00,$00,$00,$00,
  $00,$00,$3C,$18,$18,$18,$18,$18,$18,$18,$18,$3C,$00,$00,$00,$00,
  $00,$00,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$F8,$00,$00,$00,$00,
  $00,$00,$C6,$CC,$D8,$F0,$E0,$E0,$F0,$D8,$CC,$C6,$03,$00,$00,$00,
  $00,$00,$60,$60,$60,$60,$60,$60,$60,$60,$60,$3E,$00,$00,$00,$00,
  $00,$00,$C3,$C3,$E7,$FF,$DB,$DB,$C3,$C3,$C3,$C3,$00,$00,$00,$00,
  $00,$00,$C6,$C6,$E6,$F6,$DE,$CE,$C6,$C6,$C6,$C6,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$7E,$63,$63,$63,$63,$63,$FE,$60,$60,$60,$00,$00,$00,$00,
  $00,$00,$7C,$C6,$C6,$C6,$C6,$C6,$C6,$D6,$DE,$7C,$06,$02,$00,$00,
  $00,$00,$FC,$C6,$C6,$C6,$C6,$C6,$FC,$D8,$CC,$C6,$03,$00,$00,$00,
  $00,$00,$7C,$C0,$C0,$70,$1C,$06,$06,$06,$06,$FC,$00,$00,$00,$00,
  $00,$00,$FF,$18,$18,$18,$18,$18,$18,$18,$18,$18,$00,$00,$00,$00,
  $00,$00,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$C6,$C6,$C6,$C6,$C6,$C6,$C6,$6C,$38,$10,$00,$00,$00,$00,
  $00,$00,$C3,$C3,$C3,$C3,$C3,$DB,$DB,$DB,$FF,$66,$00,$00,$00,$00,
  $00,$00,$C3,$C3,$C3,$C3,$66,$3C,$18,$3C,$66,$C3,$00,$00,$00,$00,
  $00,$00,$C3,$C3,$C3,$C3,$66,$3C,$18,$30,$60,$C0,$00,$00,$00,$00,
  $00,$00,$7E,$0C,$0C,$18,$18,$30,$30,$60,$60,$FE,$00,$00,$00,$00,
  $00,$3C,$30,$30,$30,$30,$30,$30,$30,$30,$30,$30,$3C,$00,$00,$00,
  $00,$00,$00,$80,$C0,$60,$30,$18,$0C,$06,$02,$00,$00,$00,$00,$00,
  $00,$3C,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$3C,$00,$00,$00,
  $00,$10,$38,$6C,$C6,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$00,$00,$00,
  $00,$00,$30,$30,$18,$08,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$7E,$C6,$C6,$C6,$C6,$CE,$76,$00,$00,$00,$00,
  $00,$00,$60,$60,$60,$FE,$63,$63,$63,$63,$63,$7E,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$7E,$C0,$C0,$C0,$C0,$C0,$7E,$00,$00,$00,$00,
  $00,$00,$06,$06,$06,$7F,$C6,$C6,$C6,$C6,$C6,$7E,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$7C,$C6,$C6,$DC,$F0,$C0,$7E,$00,$00,$00,$00,
  $00,$00,$1E,$30,$30,$30,$7C,$30,$30,$30,$30,$30,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$7E,$C6,$C6,$C6,$C6,$C6,$7F,$06,$7C,$00,$00,
  $00,$00,$60,$60,$60,$FE,$63,$63,$63,$63,$63,$63,$00,$00,$00,$00,
  $00,$00,$18,$18,$00,$38,$18,$18,$18,$18,$18,$18,$00,$00,$00,$00,
  $00,$00,$18,$18,$00,$38,$18,$18,$18,$18,$18,$18,$18,$F0,$00,$00,
  $00,$00,$C0,$C0,$C0,$D8,$F0,$E0,$F0,$D8,$CC,$C6,$00,$00,$00,$00,
  $00,$00,$38,$18,$18,$18,$18,$18,$18,$18,$18,$3C,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$EE,$FF,$DB,$DB,$DB,$DB,$C3,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$FC,$C6,$C6,$C6,$C6,$C6,$C6,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$7C,$C6,$C6,$C6,$C6,$C6,$7C,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$7E,$63,$63,$63,$63,$63,$FE,$60,$60,$00,$00,
  $00,$00,$00,$00,$00,$7E,$C6,$C6,$C6,$C6,$C6,$7F,$06,$06,$00,$00,
  $00,$00,$00,$00,$00,$DE,$60,$60,$60,$60,$60,$60,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$7C,$C0,$70,$1C,$06,$06,$FC,$00,$00,$00,$00,
  $00,$00,$08,$18,$18,$7E,$18,$18,$18,$18,$18,$0E,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$C6,$C6,$C6,$C6,$C6,$C6,$7E,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$C6,$C6,$C6,$C6,$6C,$38,$10,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$C3,$C3,$C3,$DB,$FF,$E7,$42,$00,$00,$00,$00,
  $00,$00,$00,$00,$00,$C6,$6C,$38,$10,$38,$6C,$C6,$03,$00,$00,$00,
  $00,$00,$00,$00,$00,$C6,$C6,$C6,$C6,$C6,$C6,$7F,$06,$7C,$00,$00,
  $00,$00,$00,$00,$00,$7E,$0C,$18,$30,$60,$C0,$FE,$00,$00,$00,$00,
  $00,$0E,$18,$18,$18,$18,$70,$18,$18,$18,$18,$18,$0E,$00,$00,$00,
  $00,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18,$18,$00,$00,$00,
  $00,$70,$18,$18,$18,$18,$0E,$18,$18,$18,$18,$18,$70,$00,$00,$00,
  $00,$00,$00,$76,$DC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,
  $00,$00,$00,$3C,$42,$99,$B5,$B1,$B5,$99,$42,$3C,$00,$00,$00,$00);

var
   i: Byte;
   selector: word;

Begin

{- Text message, well der -}

  Writeln(' Mick''s TextMode Font loader (ONE-TIME.FNT)');

{- So were not disturbed -}

  asm
    cli
  end;

{- Tell CRTC we want the Font data -}

  PortW[$3C4] := $0402;
  PortW[$3C4] := $0402;
  PortW[$3C4] := $0704;
  PortW[$3CE] := $0204;
  PortW[$3CE] := $0005;
  PortW[$3CE] := $0006;

{- Put the data in the CRTC's buffer -}

{$IFDEF tp}
  for i:=0 to 127 do
   Move(DOSModeFont_Data[i*16], Mem[$A000:i*32], 16);
{$ELSE}
  asm {change ES to zero-selector, to allow us to use the direct memory reference}
     mov  word ptr [selector], es
     mov  ax, fs
     mov  es, ax
  end;
  for i:=0 to 127 do
   Move(DOSModeFont_Data[i*16], Mem[$A0000 + i*32], 16);
  asm
    mov  es, word ptr [selector]
  end;
{$ENDIF}

{- Set the CRTC Back to normal -}

  PortW[$3C4] := $0302;
  PortW[$3C4] := $0304;
  PortW[$3CE] := $0004;
  PortW[$3CE] := $1005;
  PortW[$3CE] := $0E06;

{- We finished so dirturb us all you like ISR's -}

  asm
    sti;
  end;
end.
